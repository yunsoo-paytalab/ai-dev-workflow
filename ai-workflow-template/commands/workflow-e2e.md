# `/workflow-e2e` 커맨드

**사용 시점**: E2E 테스트 작업 시

**기능**:

- E2E 테스트 플로우 제안
- E2E 테스트 작성 및 실행
- 최종 품질 검증
- 프로덕션 배포 준비

**권장사항**:

- 시스템 통합 완료

**사용법**:

```
/workflow-e2e
```

---

## 목표

E2E 테스트로 전체 사용자 플로우를 검증하고 프로덕션 배포를 준비합니다.

---

## 권장사항

💡 **권장**: 다음 단계가 완료된 후 진행하세요.

- 시스템 통합 완료

완료되지 않은 경우 발생할 수 있는 문제:

- E2E 테스트 결과가 불안정할 수 있음
- 통합 이슈가 발견될 수 있음
- 전체 품질 검증이 불완전할 수 있음

계속 진행하시겠습니까?

---

### 1단계: E2E 테스트 플로우 제안

**AI 작업**: 요구사항 명세 및 구현된 기능을 분석하여 E2E 테스트 사용자 플로우 제안

**출력 형식**:

```typescript
interface E2EFlow {
  id: string; // 'E2E-XXX'
  name: string; // '{플로우명}'
  priority: "critical" | "high" | "medium" | "low";
  description: string;
  steps: string[]; // ['{단계 1}', '{단계 2}', ...]
  estimatedTime: string; // '{예상 소요 시간}'
  relatedFeatures: string[]; // ['{기능 ID 1}', '{기능 ID 2}', ...]
  alternativeScenarios?: string[]; // ['{대체 시나리오 1}', '{대체 시나리오 2}']
}
```

#### 🔔 사용자 검수

"다음 E2E 테스트 플로우를 작성할 계획입니다:"

**제안된 플로우 목록 표시** (우선순위별)

"어떤 플로우를 테스트하시겠습니까?"

각 플로우에 대해:

- [ ] 작성 (critical 우선 권장)
- [ ] 수정 (단계 조정)
- [ ] 제외 (불필요)

**선택 옵션**:

- 대체 시나리오 포함
- 에러 시나리오 포함

⚠️ **승인된 플로우만 작성**

---

### 2단계: E2E 테스트 작성

승인된 플로우에 대해 E2E 테스트 작성:

**테스트 구조**:

```typescript
// e2e/{flow-name}.spec.ts

test.describe("{플로우명}", () => {
  test("{테스트 케이스명}", async ({ page }) => {
    // {단계별 플로우 설명}
  });

  test("{에러 시나리오명}", async ({ page }) => {
    // {에러 시나리오 검증}
  });
});
```

**포함사항**:

- 각 단계별 페이지 전환 검증
- 사용자 인터랙션 (클릭, 입력)
- 결과 검증 (URL, 텍스트, 상태)
- 에러 시나리오
- 스크린샷/비디오 캡처 (실패 시)

---

### 3단계: E2E 테스트 실행

**테스트 실행**:

1. 모든 E2E 테스트 실행
2. 실패 시 스크린샷/비디오 확인
3. 에러 로그 분석
4. 재현 단계 문서화

---

### 4단계: 실패 테스트 처리

#### 🔔 사용자 확인

"E2E 테스트 결과:"

- ✅ 통과: N개 테스트
- ❌ 실패: N개 테스트

**실패 테스트**:

- E2E-XXX: {테스트명}
  - 실패 단계: {단계명}
  - 에러: {에러 타입}
  - 스크린샷: [첨부]

"다음 중 하나를 선택해주세요:"

- [ ] 기능 수정 후 재실행
- [ ] 테스트 코드 수정 필요
- [ ] 환경 이슈 (재실행)

---

### 5단계: 최종 품질 검증

#### ✅ 기능 완전성

- [ ] 모든 요구사항 기능 구현
- [ ] 모든 기능 테스트 통과
- [ ] E2E 테스트 통과

#### ✅ 코드 품질

- [ ] 타입 에러 0개
- [ ] 린터 경고 0개
- [ ] 테스트 커버리지 90% 이상
- [ ] 중복 코드 최소화

#### ✅ 성능 (최적화 수행한 경우)

- [ ] 초기 로딩 < 3초
- [ ] 페이지 전환 < 1초
- [ ] 번들 사이즈 목표 달성

#### ✅ 접근성

- [ ] 키보드 네비게이션 가능
- [ ] 스크린 리더 호환
- [ ] 색상 대비 WCAG AA 충족

#### ✅ 보안

- [ ] 인증/권한 검증
- [ ] XSS 방어
- [ ] CSRF 방어
- [ ] 민감 정보 보호

#### ✅ 문서

- [ ] README 업데이트
- [ ] API 문서 작성
- [ ] 배포 가이드 작성

---

### 6단계: 최종 승인

### 검수 가이드 (AI용)

**기본 원칙**: 전체 프로젝트 완성도 평가

**항상 물어볼 것**:

- 프로젝트가 프로덕션 배포 준비가 되었는가?

**조건부 질문**:

- E2E 테스트 실패가 있었던 경우: 모든 이슈가 해결되었는가?
- 성능 최적화를 수행한 경우: 최종 성능 지표가 만족스러운가?
- 문서: 배포 가이드가 충분한가?

**질문 스타일**:

- 전체 프로젝트 완성도 평가
- 개선 가능한 부분 제안
- 최종 배포 체크리스트 확인

#### 🔔 최종 승인

"프로젝트가 프로덕션 배포 준비가 완료되었습니다."

**최종 상태**:

- ✅ 기능: N개 (100%)
- ✅ 테스트 통과율: 100%
- ✅ E2E 통과: N/N
- ✅ 커버리지: X% (목표: 90% 이상)
- ✅ 성능 목표: 달성 (최적화 수행한 경우)
- ✅ 접근성: WCAG AA
- ✅ 문서: 완료

**배포 준비**:

- 환경 변수 설정 가이드
- 빌드 스크립트
- CI/CD 파이프라인
- 모니터링 설정

**최종 확인**:

- [ ] 승인 (배포 준비 완료)
- [ ] 추가 작업 필요

**승인 시**: 🎉 프로젝트 완료!

---

## 메모리 업데이트

**E2E 테스트 완료 시**:

```markdown
- [x] E2E 테스트
```

---

## 다음 단계

**모두 완료 후**:

- 🎉 프로덕션 배포
- 사용자 피드백 수집
- 지속적 개선

---

## 결과물 파일 경로

**E2E 테스트**:

- `e2e/` - E2E 테스트

**문서**:

- `docs/deployment.md` - 배포 가이드
