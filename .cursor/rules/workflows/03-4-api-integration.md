# API ì—°ë™ (Phase 2-4)

> âš ï¸ **ì´ íŒŒì¼ì„ ì½ê¸° ì „ì— ë¨¼ì € ì½ì–´ì•¼ í•  íŒŒì¼**:
>
> 1. `@00-memory.md` - í˜„ì¬ ì‘ì—… ì¤‘ì¸ ê¸°ëŠ¥ í™•ì¸
> 2. `@03-2-ui-design.md` - UI ì„¤ê³„ ê²°ê³¼ í™•ì¸
> 3. `@03-3-implementation.md` - êµ¬í˜„ ê²°ê³¼ í™•ì¸

## ëª©í‘œ ë° ë²”ìœ„

**Phase 2-4 ëª©í‘œ**: ë”ë¯¸ ë°ì´í„°ë¥¼ ì‹¤ì œ APIë¡œ ì—°ë™í•©ë‹ˆë‹¤. (ì„ íƒì  - APIê°€ ì¤€ë¹„ëœ ê¸°ëŠ¥ë§Œ)

**ë‹¨ê³„**:

- Step 8: API ì—°ë™ (ì„ íƒì )

---

## ì‚¬ì „ ìš”êµ¬ì‚¬í•­ í™•ì¸

âš ï¸ **ì‹œì‘ ì „ í•„ìˆ˜ í™•ì¸**:

1. `@00-memory.md`ì—ì„œ í˜„ì¬ ì‘ì—… ì¤‘ì¸ ê¸°ëŠ¥ í™•ì¸
2. Phase 2-3 (êµ¬í˜„) ì™„ë£Œ í™•ì¸
3. **API ì¤€ë¹„ ìƒíƒœ í™•ì¸** (ì‹¤ì œ APIê°€ ì¤€ë¹„ë˜ì—ˆëŠ”ì§€)

**Phase 2-3ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì§„í–‰ ê¸ˆì§€**

**APIê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì´ ë‹¨ê³„ë¥¼ ê±´ë„ˆë›°ê³  ë‹¤ìŒ ê¸°ëŠ¥ìœ¼ë¡œ ì§„í–‰**

---

## API ì¤€ë¹„ ìƒíƒœ í™•ì¸

### ğŸ”” API ì¤€ë¹„ ìƒíƒœ í™•ì¸

"í˜„ì¬ ê¸°ëŠ¥ **[ê¸°ëŠ¥ëª…]**ì˜ API ì—°ë™ì„ ì§„í–‰í•˜ë ¤ê³  í•©ë‹ˆë‹¤."

**API ì¤€ë¹„ ìƒíƒœë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”:**

- [ ] **ì‹¤ì œ API ì¤€ë¹„ë¨** (ì—°ë™ ì§„í–‰)
- [ ] **API ì•„ì§ ì¤€ë¹„ ì•ˆë¨** (ë”ë¯¸ ë°ì´í„° ìœ ì§€, ë‹¤ìŒ ê¸°ëŠ¥ìœ¼ë¡œ)
- [ ] **ë¶€ë¶„ì ìœ¼ë¡œ ì¤€ë¹„ë¨** (ì¤€ë¹„ëœ APIë§Œ ì—°ë™)

**API ì¤€ë¹„ ìƒíƒœê°€ "ì•„ì§ ì¤€ë¹„ ì•ˆë¨"ì¸ ê²½ìš°**:

- ì´ ë‹¨ê³„ë¥¼ ê±´ë„ˆë›°ê³  ë‹¤ìŒ ê¸°ëŠ¥ìœ¼ë¡œ ì§„í–‰
- ë”ë¯¸ ë°ì´í„°ë¥¼ ê³„ì† ì‚¬ìš©
- Phase 3 ì‹œì‘ ì „ì— ë‹¤ì‹œ í™•ì¸

---

## Step 8: API ì—°ë™ (ì„ íƒì )

### ëª©í‘œ

ë”ë¯¸ ë°ì´í„°ë¥¼ ì‹¤ì œ APIë¡œ êµì²´í•˜ì—¬ ì‹¤ì œ ë°±ì—”ë“œì™€ ì—°ë™í•©ë‹ˆë‹¤.

### API ê°€ì´ë“œ í™•ì¸

**AI ì‘ì—…**: `@00-memory.md`ì˜ "ì£¼ìš” ê²°ì • ì‚¬í•­ > ì•„í‚¤í…ì²˜" ì„¹ì…˜ í™•ì¸

**API ê°€ì´ë“œê°€ ìˆëŠ” ê²½ìš°**:

- ê¸°ì¡´ ê°€ì´ë“œ (`docs/api-guidelines.md`) ì°¸ì¡°
- ì •ì˜ëœ íŒ¨í„´ ì¤€ìˆ˜ (ë„¤ì´ë°, ì—ëŸ¬ í¬ë§·, í˜ì´ì§€ë„¤ì´ì…˜ ë“±)

**API ê°€ì´ë“œê°€ ì—†ëŠ” ê²½ìš°** (ì²« API ì—°ë™):

#### ğŸ”” ì²« API ì—°ë™ ì‹œ ìë™ ì‘ì—…

"API ê°€ì´ë“œê°€ ì—†ìŠµë‹ˆë‹¤. ê¸°ë³¸ API íŒ¨í„´ì„ ì •ì˜í•˜ê³  `docs/api-guidelines.md`ë¥¼ ìƒì„±í•˜ê² ìŠµë‹ˆë‹¤."

**ìë™ ìƒì„± ì‘ì—…**:

1. **ê¸°ë³¸ API íŒ¨í„´ ì •ì˜**:

   - ì—”ë“œí¬ì¸íŠ¸ ë„¤ì´ë°: `/api/{resource}`
   - HTTP ë©”ì„œë“œ ê·œì¹™: GET (ì¡°íšŒ), POST (ìƒì„±), PUT (ìˆ˜ì •), DELETE (ì‚­ì œ)
   - ì—ëŸ¬ ì‘ë‹µ í¬ë§·:
     ```typescript
     interface ErrorResponse {
       code: string;
       message: string;
       details?: Record<string, string>;
     }
     ```
   - í˜ì´ì§€ë„¤ì´ì…˜ íŒ¨í„´:
     ```typescript
     interface PaginationParams {
       page: number;
       limit: number;
     }
     interface PaginationResponse<T> {
       data: T[];
       page: number;
       limit: number;
       total: number;
       totalPages: number;
     }
     ```
   - ê³µí†µ í—¤ë”: `Authorization: Bearer {token}`, `Content-Type: application/json`

2. **`docs/api-guidelines.md` ìƒì„±**:

   - ìœ„ íŒ¨í„´ ë¬¸ì„œí™”
   - ì˜ˆì‹œ ì½”ë“œ í¬í•¨
   - íƒ€ì… ì •ì˜ í¬í•¨

3. **Memory íŒŒì¼ ì—…ë°ì´íŠ¸**:

   - "ì£¼ìš” ê²°ì • ì‚¬í•­ > ì•„í‚¤í…ì²˜" ì„¹ì…˜ì— ê²½ë¡œ ê¸°ë¡
   - "API ê°€ì´ë“œ: `docs/api-guidelines.md` (ìë™ ìƒì„±)"

4. **í˜„ì¬ ê¸°ëŠ¥ì—ì„œ ì¦‰ì‹œ ì ìš©**:
   - ìƒì„±í•œ íŒ¨í„´ìœ¼ë¡œ API ì—°ë™ ì§„í–‰

**ì´í›„ ê¸°ëŠ¥ì—ì„œëŠ”**:

- ìë™ ìƒì„±ëœ `docs/api-guidelines.md` ì°¸ì¡°
- ê¸°ì¡´ íŒ¨í„´ ì¬ì‚¬ìš©

---

### 8-1. ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸

**AI ì‘ì—…**: ì‹¤ì œ API ë¬¸ì„œ ë˜ëŠ” ë°±ì—”ë“œ ê°œë°œìì™€ í˜‘ì˜í•˜ì—¬ API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸

**í™•ì¸ ì‚¬í•­**:

- ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸ URL
- ìš”ì²­/ì‘ë‹µ ìŠ¤í‚¤ë§ˆ
- ì¸ì¦ ë°©ì‹
- ì—ëŸ¬ ì‘ë‹µ í¬ë§·

### ğŸ“˜ ì‹¤ì œ API í™•ì¸ ì˜ˆì‹œ (ì°¸ê³ ìš©)

ìƒí’ˆ ëª©ë¡ ì¡°íšŒ ê¸°ëŠ¥ì˜ ê²½ìš°:

**ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸**:

- `GET https://api.example.com/products`
- `GET https://api.example.com/categories`
- `POST https://api.example.com/wishlist`

**ì¸ì¦**: `Authorization: Bearer {token}`

**ì‘ë‹µ í¬ë§·**: ê¸°ì¡´ Mock APIì™€ ë™ì¼í•œ êµ¬ì¡°

---

### 8-2. API í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì •

**ì‘ì—… ë‚´ìš©**: ë”ë¯¸ ë°ì´í„°ë¥¼ ì‹¤ì œ APIë¡œ êµì²´

**ìˆ˜ì • ëŒ€ìƒ**:

1. **API ì—”ë“œí¬ì¸íŠ¸ URL ë³€ê²½**:

   ```typescript
   // ê¸°ì¡´ (ë”ë¯¸ ë°ì´í„°)
   const API_BASE_URL = "/api";

   // ë³€ê²½ (ì‹¤ì œ)
   const API_BASE_URL = "https://api.example.com";
   ```

2. **ì¸ì¦ í—¤ë” ì¶”ê°€**:

   ```typescript
   const headers = {
     Authorization: `Bearer ${token}`,
     "Content-Type": "application/json",
   };
   ```

3. **ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ **:

   - ì‹¤ì œ API ì—ëŸ¬ ì‘ë‹µ ì²˜ë¦¬
   - HTTP ìƒíƒœ ì½”ë“œë³„ ì²˜ë¦¬
   - ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì²˜ë¦¬

4. **ë”ë¯¸ ë°ì´í„° ë°˜í™˜ ì„¤ì •**:

   ```typescript
   // ê°œë°œ/í…ŒìŠ¤íŠ¸ í™˜ê²½ì—ì„œ ë”ë¯¸ ë°ì´í„° ë°˜í™˜
   const USE_DUMMY_DATA = import.meta.env.VITE_USE_DUMMY_DATA === "true";

   if (USE_DUMMY_DATA) {
     // ë”ë¯¸ ë°ì´í„° ë°˜í™˜ (ì‹¤ì œ API í˜¸ì¶œ ì—†ì´)
     return getDummyData(params);
   }
   ```

5. **API ì‘ë‹µ ìºì‹±**:

   ```typescript
   // API ì‘ë‹µ ìºì‹±ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
   const cache = new Map();
   const CACHE_TTL = 5 * 60 * 1000; // 5ë¶„

   const getCachedData = (key: string) => {
     const cached = cache.get(key);
     if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
       return cached.data;
     }
     return null;
   };
   ```

### ğŸ“˜ API í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì • ì˜ˆì‹œ (ì°¸ê³ ìš©)

```typescript
// src/api/product/productApi.ts

const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || "/api";
const USE_DUMMY_DATA = import.meta.env.VITE_USE_DUMMY_DATA === "true";

// ë”ë¯¸ ë°ì´í„° ìƒì„± í•¨ìˆ˜
const getDummyProducts = (params: ProductParams) => {
  const dummyProducts = Array.from({ length: 20 }, (_, i) => ({
    id: (i + 1).toString(),
    name: `ë”ë¯¸ ìƒí’ˆ ${i + 1}`,
    price: Math.floor(Math.random() * 100000) + 1000,
    category: ["electronics", "clothing", "books"][i % 3],
    image: `/images/dummy-product-${i + 1}.jpg`,
    description: `ë”ë¯¸ ìƒí’ˆ ${i + 1} ì„¤ëª…`,
    inStock: Math.random() > 0.1,
  }));

  const { page = 1, limit = 10, category } = params;
  let filteredProducts = dummyProducts;

  if (category) {
    filteredProducts = dummyProducts.filter((p) => p.category === category);
  }

  const startIndex = (page - 1) * limit;
  const endIndex = startIndex + limit;
  const paginatedProducts = filteredProducts.slice(startIndex, endIndex);

  return Promise.resolve({
    products: paginatedProducts,
    totalCount: filteredProducts.length,
    page,
    totalPages: Math.ceil(filteredProducts.length / limit),
  });
};

export const getProducts = async (params: ProductParams) => {
  // ë”ë¯¸ ë°ì´í„° ì‚¬ìš©
  if (USE_DUMMY_DATA) {
    return getDummyProducts(params);
  }

  // ì‹¤ì œ API í˜¸ì¶œ
  const searchParams = new URLSearchParams();
  Object.entries(params).forEach(([key, value]) => {
    if (value !== undefined && value !== null) {
      searchParams.append(key, value.toString());
    }
  });

  const response = await fetch(`${API_BASE_URL}/products?${searchParams}`, {
    headers: {
      Authorization: `Bearer ${getToken()}`,
      "Content-Type": "application/json",
    },
  });

  if (!response.ok) {
    throw new Error(`API Error: ${response.status}`);
  }

  return response.json();
};

export const getCategories = async () => {
  if (USE_DUMMY_DATA) {
    return Promise.resolve({
      categories: [
        { id: "1", name: "ì „ìì œí’ˆ", slug: "electronics" },
        { id: "2", name: "ì˜ë¥˜", slug: "clothing" },
        { id: "3", name: "ë„ì„œ", slug: "books" },
      ],
    });
  }

  const response = await fetch(`${API_BASE_URL}/categories`, {
    headers: {
      Authorization: `Bearer ${getToken()}`,
      "Content-Type": "application/json",
    },
  });

  if (!response.ok) {
    throw new Error(`API Error: ${response.status}`);
  }

  return response.json();
};

export const addToWishlist = async (productId: string) => {
  if (USE_DUMMY_DATA) {
    // ë”ë¯¸ ì‘ë‹µ (í•­ìƒ ì„±ê³µ)
    return Promise.resolve({
      success: true,
      message: "ë”ë¯¸ ì°œí•˜ê¸° ì„±ê³µ",
    });
  }

  const response = await fetch(`${API_BASE_URL}/wishlist`, {
    method: "POST",
    headers: {
      Authorization: `Bearer ${getToken()}`,
      "Content-Type": "application/json",
    },
    body: JSON.stringify({ productId }),
  });

  if (!response.ok) {
    throw new Error(`API Error: ${response.status}`);
  }

  return response.json();
};
```

---

### 8-3. ë”ë¯¸ ë°ì´í„° ë¹„í™œì„±í™”

**ì‘ì—… ë‚´ìš©**: ì‹¤ì œ API ì—°ë™ ì‹œ ë”ë¯¸ ë°ì´í„° ë¹„í™œì„±í™”

**ìˆ˜ì • ì‚¬í•­**:

1. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**:

   ```typescript
   // .env
   VITE_USE_DUMMY_DATA=false
   VITE_API_BASE_URL=https://api.example.com
   ```

   **í™˜ê²½ë³„ ì„¤ì •**:

   ```typescript
   // .env.development (ê°œë°œ í™˜ê²½)
   VITE_USE_DUMMY_DATA=true
   VITE_API_BASE_URL=/api

   // .env.staging (ìŠ¤í…Œì´ì§• í™˜ê²½)
   VITE_USE_DUMMY_DATA=false
   VITE_API_BASE_URL=https://staging-api.example.com
   // .env.production (í”„ë¡œë•ì…˜ í™˜ê²½)
   VITE_USE_DUMMY_DATA=false
   VITE_API_BASE_URL=https://api.example.com
   ```

2. **API í´ë¼ì´ì–¸íŠ¸ ì„¤ì •**:

   ```typescript
   // src/api/config.ts
   export const API_CONFIG = {
     baseURL: import.meta.env.VITE_API_BASE_URL,
     useDummyData: import.meta.env.VITE_USE_DUMMY_DATA === "true",
   };
   ```

3. **ë”ë¯¸ ë°ì´í„° í•¨ìˆ˜ ì£¼ì„ ì²˜ë¦¬** (ì„ íƒì‚¬í•­):

   ```typescript
   // src/api/product/productApi.ts
   // ë”ë¯¸ ë°ì´í„° ì‚¬ìš© ë¶€ë¶„ì„ ì£¼ì„ ì²˜ë¦¬í•˜ê±°ë‚˜ ì œê±°
   // if (USE_DUMMY_DATA) {
   //   return getDummyProducts(params);
   // }
   ```

---

### 8-4. í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸

**ì‘ì—… ë‚´ìš©**: ì‹¤ì œ API ì—°ë™ì— ë§ê²Œ í…ŒìŠ¤íŠ¸ ìˆ˜ì •

**ìˆ˜ì • ì‚¬í•­**:

1. **API í…ŒìŠ¤íŠ¸ ìˆ˜ì •**:

   - ë”ë¯¸ ë°ì´í„° ëŒ€ì‹  ì‹¤ì œ API í˜¸ì¶œ í…ŒìŠ¤íŠ¸
   - ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ ì¶”ê°€
   - ì¸ì¦ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ ì¶”ê°€

2. **í†µí•© í…ŒìŠ¤íŠ¸ ìˆ˜ì •**:
   - ì‹¤ì œ API ì‘ë‹µì— ë§ê²Œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¡°ì •
   - ì—ëŸ¬ ì‘ë‹µ í…ŒìŠ¤íŠ¸ ì¶”ê°€

### ğŸ“˜ í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì˜ˆì‹œ (ì°¸ê³ ìš©)

```typescript
// __tests__/api/product.test.ts

// ê¸°ì¡´ ë”ë¯¸ ë°ì´í„° í…ŒìŠ¤íŠ¸
test("ìƒí’ˆ ëª©ë¡ ì¡°íšŒ ì„±ê³µ (ë”ë¯¸ ë°ì´í„°)", async () => {
  // ë”ë¯¸ ë°ì´í„° ì‚¬ìš©
  process.env.VITE_USE_DUMMY_DATA = "true";
  const products = await getProducts({ page: 1 });
  expect(products.products).toHaveLength(10);
});

// ì‹¤ì œ API í…ŒìŠ¤íŠ¸ë¡œ ë³€ê²½
test("ìƒí’ˆ ëª©ë¡ ì¡°íšŒ ì„±ê³µ (ì‹¤ì œ API)", async () => {
  // ë”ë¯¸ ë°ì´í„° ë¹„í™œì„±í™”
  process.env.VITE_USE_DUMMY_DATA = "false";
  // ì‹¤ì œ API í˜¸ì¶œ
  const products = await getProducts({ page: 1 });
  expect(products.data).toBeDefined();
  expect(products.totalCount).toBeGreaterThan(0);
});

test("ì¸ì¦ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ì²˜ë¦¬", async () => {
  // í† í° ì—†ì´ API í˜¸ì¶œ
  await expect(getProducts({ page: 1 })).rejects.toThrow("API Error: 401");
});
```

---

### 8-5. API ì—°ë™ ê²€ìˆ˜ ë° ìŠ¹ì¸

#### ğŸ›‘ ì‚¬ìš©ì ê²€ìˆ˜ í•„ìˆ˜

"ê¸°ëŠ¥ **[í˜„ì¬ ê¸°ëŠ¥ëª…]**ì˜ API ì—°ë™ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤."

**ì—°ë™ ê²°ê³¼**:

API ì—°ë™:

- âœ… ì‹¤ì œ API ì—”ë“œí¬ì¸íŠ¸ ì—°ë™ ì™„ë£Œ
- âœ… ì¸ì¦ ì²˜ë¦¬ êµ¬í˜„
- âœ… ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 
- âœ… ë”ë¯¸ ë°ì´í„° ë¹„í™œì„±í™”
- âœ… ì‹¤ì œ API ì—°ë™ ì™„ë£Œ

í…ŒìŠ¤íŠ¸:

- âœ… API í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì™„ë£Œ
- âœ… í†µí•© í…ŒìŠ¤íŠ¸ ìˆ˜ì • ì™„ë£Œ
- âœ… ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼

íŒŒì¼ ìˆ˜ì •:

- `src/api/{domain}/` (API í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì •)
- `src/mocks/` (ë”ë¯¸ ë°ì´í„° ì œê±°)
- `__tests__/api/` (í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸)

#### âœ… API ì—°ë™ ê²€í† 

- [ ] ì‹¤ì œ APIì™€ ì •ìƒ ì—°ë™ë˜ëŠ”ê°€?
- [ ] ì¸ì¦ì´ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬ë˜ëŠ”ê°€?
- [ ] ì—ëŸ¬ ì²˜ë¦¬ê°€ ì ì ˆí•œê°€?
- [ ] ë”ë¯¸ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ê²Œ ë¹„í™œì„±í™”ë˜ì—ˆëŠ”ê°€?
- [ ] í…ŒìŠ¤íŠ¸ê°€ ì‹¤ì œ APIì— ë§ê²Œ ìˆ˜ì •ë˜ì—ˆëŠ”ê°€?

#### ğŸ“ ë³€ê²½ ìš”ì²­ ê°€ëŠ¥

- API ì—”ë“œí¬ì¸íŠ¸ ìˆ˜ì •
- ì¸ì¦ ë°©ì‹ ë³€ê²½
- ì—ëŸ¬ ì²˜ë¦¬ ê°œì„ 
- í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€

âš ï¸ **ìŠ¹ì¸ ì „ê¹Œì§€ ë‹¤ìŒ ê¸°ëŠ¥ ì§„í–‰ ê¸ˆì§€**

---

## Memory ì—…ë°ì´íŠ¸

**Step 8 ì™„ë£Œ ì‹œ**:

- `@00-memory.md`ì˜ "í˜„ì¬ ì‘ì—… ìƒíƒœ" ì—…ë°ì´íŠ¸
  - í˜„ì¬ ì›Œí¬í”Œë¡œìš°: ë‹¤ìŒ ê¸°ëŠ¥ ë˜ëŠ” Phase 3 ì¤€ë¹„
  - API ì—°ë™ ì™„ë£Œ í‘œì‹œ
  - ì§„í–‰ë¥ : 100%

**API ì—°ë™ ê±´ë„ˆë›´ ê²½ìš°**:

- `@00-memory.md`ì˜ "í˜„ì¬ ì‘ì—… ìƒíƒœ" ì—…ë°ì´íŠ¸
  - API ì—°ë™ ê±´ë„ˆë›°ê¸° ì‚¬ìœ  ê¸°ë¡
  - Mock API ìœ ì§€ ìƒíƒœ ê¸°ë¡

---

## ë‹¤ìŒ ë‹¨ê³„

**Step 8 ìŠ¹ì¸ í›„**:

â†’ ë‹¤ìŒ ê¸°ëŠ¥ìœ¼ë¡œ ì§„í–‰ ë˜ëŠ” Phase 3 ì¤€ë¹„

**API ì—°ë™ì„ ê±´ë„ˆë›´ ê²½ìš°**:

â†’ ë‹¤ìŒ ê¸°ëŠ¥ìœ¼ë¡œ ì§„í–‰ (Mock API ìœ ì§€)

**ëª¨ë“  ê¸°ëŠ¥ ì™„ë£Œ ì‹œ**:

â†’ `@04-integration.md` (Phase 3 - í†µí•© ë° ê²€ì¦)

**Phase 3 ì‹œì‘ ì „ API ì—°ë™ ì—¬ë¶€ ì¬í™•ì¸**:

â†’ Phase 3 ì‹œì‘ ì „ì— ì•„ì§ ì—°ë™ë˜ì§€ ì•Šì€ APIë“¤ì— ëŒ€í•´ ì—°ë™ ì—¬ë¶€ ì¬í™•ì¸

---

## ë”ë¯¸ ë°ì´í„° í™œìš© ê°€ì´ë“œ

### ë”ë¯¸ ë°ì´í„° ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

**ê°œë°œ ë‹¨ê³„**:

- APIê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì€ ê²½ìš°
- í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì„ ë¨¼ì € ì§„í–‰í•´ì•¼ í•˜ëŠ” ê²½ìš°
- UI/UX í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë°ì´í„°ê°€ í•„ìš”í•œ ê²½ìš°

**í…ŒìŠ¤íŠ¸ ë‹¨ê³„**:

- E2E í…ŒìŠ¤íŠ¸ì—ì„œ ì¼ê´€ëœ ë°ì´í„°ê°€ í•„ìš”í•œ ê²½ìš°
- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ëŒ€ëŸ‰ ë°ì´í„°ê°€ í•„ìš”í•œ ê²½ìš°
- ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ê°€ í•„ìš”í•œ ê²½ìš°

### ë”ë¯¸ ë°ì´í„° ì„¤ì • ë°©ë²•

1. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**:

   ```typescript
   // .env.development
   VITE_USE_DUMMY_DATA = true;
   VITE_DUMMY_DATA_SIZE = 100; // ë”ë¯¸ ë°ì´í„° ê°œìˆ˜
   VITE_DUMMY_DATA_DELAY = 300; // ì‘ë‹µ ì§€ì—° ì‹œê°„ (ms)
   ```

2. **ë”ë¯¸ ë°ì´í„° ìƒì„±**:

   ```typescript
   // src/mocks/data/product.ts
   export const dummyProducts = Array.from({ length: 20 }, (_, i) => ({
     id: (i + 1).toString(),
     name: `ë”ë¯¸ ìƒí’ˆ ${i + 1}`,
     price: Math.floor(Math.random() * 100000) + 1000,
     category: ["electronics", "clothing", "books", "home", "sports"][i % 5],
     brand: ["Brand A", "Brand B", "Brand C", "Brand D"][i % 4],
     image: `/images/dummy-product-${i + 1}.jpg`,
     description: `ë”ë¯¸ ìƒí’ˆ ${i + 1}ì˜ ìƒì„¸ ì„¤ëª…ì…ë‹ˆë‹¤.`,
     inStock: Math.random() > 0.1,
     rating: Math.floor(Math.random() * 5) + 1,
     reviewCount: Math.floor(Math.random() * 100),
     createdAt: new Date(
       Date.now() - Math.random() * 365 * 24 * 60 * 60 * 1000
     ).toISOString(),
   }));

   export const dummyCategories = [
     { id: "1", name: "ì „ìì œí’ˆ", slug: "electronics" },
     { id: "2", name: "ì˜ë¥˜", slug: "clothing" },
     { id: "3", name: "ë„ì„œ", slug: "books" },
     { id: "4", name: "í™ˆ", slug: "home" },
     { id: "5", name: "ìŠ¤í¬ì¸ ", slug: "sports" },
   ];
   ```

3. **ë”ë¯¸ ë°ì´í„° í•¨ìˆ˜**:

   ```typescript
   // src/mocks/data/product.ts (ê°™ì€ íŒŒì¼ì— ì¶”ê°€)
   export const getDummyProducts = (params: any) => {
     const {
       category,
       page = 1,
       limit = 10,
       sort,
       minPrice,
       maxPrice,
       brand,
       inStock,
     } = params;

     let filtered = [...dummyProducts];

     // í•„í„°ë§
     if (category) {
       filtered = filtered.filter((p) => p.category === category);
     }
     if (minPrice !== undefined) {
       filtered = filtered.filter((p) => p.price >= minPrice);
     }
     if (maxPrice !== undefined) {
       filtered = filtered.filter((p) => p.price <= maxPrice);
     }
     if (brand) {
       filtered = filtered.filter((p) => p.brand === brand);
     }
     if (inStock) {
       filtered = filtered.filter((p) => p.inStock);
     }

     // ì •ë ¬
     switch (sort) {
       case "price_asc":
         filtered.sort((a, b) => a.price - b.price);
         break;
       case "price_desc":
         filtered.sort((a, b) => b.price - a.price);
         break;
       case "name_asc":
         filtered.sort((a, b) => a.name.localeCompare(b.name));
         break;
       case "name_desc":
         filtered.sort((a, b) => b.name.localeCompare(a.name));
         break;
       case "rating_desc":
         filtered.sort((a, b) => b.rating - a.rating);
         break;
       case "newest":
         filtered.sort(
           (a, b) =>
             new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
         );
         break;
     }

     // í˜ì´ì§€ë„¤ì´ì…˜
     const startIndex = (page - 1) * limit;
     const endIndex = startIndex + limit;
     const paginatedProducts = filtered.slice(startIndex, endIndex);

     return Promise.resolve({
       products: paginatedProducts,
       totalCount: filtered.length,
       page,
       totalPages: Math.ceil(filtered.length / limit),
     });
   };

   export const getDummyCategories = () => {
     return Promise.resolve({
       categories: dummyCategories,
     });
   };

   export const addToDummyWishlist = (productId: string) => {
     return Promise.resolve({
       success: true,
       message: "ë”ë¯¸ ì°œí•˜ê¸° ì„±ê³µ",
     });
   };
   ```

### ë”ë¯¸ ë°ì´í„° ì„±ëŠ¥ ìµœì í™”

1. **ì§€ì—° ì‹œë®¬ë ˆì´ì…˜**:

   ```typescript
   // src/mocks/data/product.ts (ê°™ì€ íŒŒì¼ì— ì¶”ê°€)
   export const simulateApiDelay = (min: number = 100, max: number = 500) => {
     const delay = Math.floor(Math.random() * (max - min + 1)) + min;
     return new Promise((resolve) => setTimeout(resolve, delay));
   };
   ```

2. **ì—ëŸ¬ ì‹œë®¬ë ˆì´ì…˜**:

   ```typescript
   // src/mocks/data/product.ts (ê°™ì€ íŒŒì¼ì— ì¶”ê°€)
   export const simulateApiError = (errorRate: number = 0.1) => {
     if (Math.random() < errorRate) {
       const errors = [
         { status: 500, message: "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤" },
         { status: 404, message: "ìš”ì²­í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" },
         { status: 403, message: "ì ‘ê·¼ ê¶Œí•œì´ ì—†ìŠµë‹ˆë‹¤" },
         { status: 401, message: "ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤" },
       ];
       const error = errors[Math.floor(Math.random() * errors.length)];
       throw new Error(`${error.status}: ${error.message}`);
     }
   };
   ```

3. **ìºì‹± ì „ëµ**:

   ```typescript
   // src/mocks/data/product.ts (ê°™ì€ íŒŒì¼ì— ì¶”ê°€)
   const cache = new Map();
   const CACHE_TTL = 5 * 60 * 1000; // 5ë¶„

   export const getCachedDummyData = (key: string, generator: () => any) => {
     const cached = cache.get(key);
     if (cached && Date.now() - cached.timestamp < CACHE_TTL) {
       return Promise.resolve(cached.data);
     }

     const data = generator();
     cache.set(key, {
       data,
       timestamp: Date.now(),
     });

     return Promise.resolve(data);
   };
   ```

---

## API ì—°ë™ ê±´ë„ˆë›°ê¸° ì‹œ ì£¼ì˜ì‚¬í•­

**ë”ë¯¸ ë°ì´í„° ìœ ì§€ ì‹œ**:

- ë”ë¯¸ ë°ì´í„° ê³„ì† ì‚¬ìš©
- ì‹¤ì œ API ì¤€ë¹„ ì‹œ ë‚˜ì¤‘ì— ì—°ë™ ê°€ëŠ¥
- Phase 3 ì‹œì‘ ì „ì— ì—°ë™ ì—¬ë¶€ ì¬í™•ì¸

**Phase 3 ì‹œì‘ ì „ ì¬í™•ì¸**:

- ì•„ì§ ì—°ë™ë˜ì§€ ì•Šì€ API ëª©ë¡ í™•ì¸
- ê° APIë³„ ì—°ë™ ì—¬ë¶€ ì¬í™•ì¸
- ì—°ë™ ê°€ëŠ¥í•œ APIë§Œ ì„ ë³„ì ìœ¼ë¡œ ì—°ë™
