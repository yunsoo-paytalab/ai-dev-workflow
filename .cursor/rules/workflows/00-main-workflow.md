# 메인 워크플로우 프롬프트

> 📌 **AI를 위한 가이드**:
>
> - 이 파일은 전체 개발 프로세스의 개요를 제공합니다
> - 작업 시작 전 반드시 `@00-memory.md`를 읽어 현재 진행 상황을 확인하세요
> - 현재 Phase에 맞는 워크플로우 파일만 개별적으로 참조하세요
> - `@workflows/` 전체 폴더 참조는 혼란을 야기하므로 금지합니다

---

## 전체 개발 프로세스 개요

### 3-Phase 개발 프로세스

1. **Phase 1: 초기 설계** - 전체 구조와 공통 요소만 정의
2. **Phase 2: 기능별 개발** - 각 기능을 UI부터 구현까지 완성
3. **Phase 3: 통합 및 검증** - 전체 시스템 통합 및 품질 보증

### 핵심 원칙

- **Test-First 개발**: 테스트를 먼저 작성하고 구현
- **타입 안전성**: TypeScript를 활용한 완전한 타입 안전성 보장
- **사용자 검수**: 각 주요 단계마다 사용자 승인 필요
- **점진적 구현**: 기능 단위로 하나씩 완성

### 순차 진행 게이트 규칙

- 모든 단계는 반드시 순차적으로 진행
- 직전 단계가 "완료" 상태여야 다음 단계 진행 가능
- 사용자 승인 없이 다음 단계로 진행 금지
- `@00-memory.md`에서 진행 상황 확인 필수

---

## Phase 구조

### Phase 1: 초기 설계 (전체 구조 잡기)

> ⚠️ **Phase 1 시작 전 필수**: `@00-memory.md`의 "🚀 초기 설정" 완료

**초기 설정 체크리스트**:

- [ ] 프로젝트 정보 입력 (이름, 경로, 일정)
- [ ] 폴더 구조 정의 (src/, pages/, features/, shared/ 등)
- [ ] 기술 스택 정의 (React, TypeScript, 스타일링 등)
- [ ] 디자인 시스템 정보 입력 (토큰 경로, 스타일 방식)

**미완료 시**: `@01-domain-definition.md`의 Step 0 참조

---

**목적**: 프로젝트의 뼈대와 공통 요소만 정의

**Turn 1: 전체 도메인 정의** (`@01-domain-definition.md`)

- 도메인 목록 및 경계 설정
- 페이지 구조 (URL, 라우팅)
- 기능 목록 및 의존성
- 리소스 식별
- 기술 스택 제안

**Turn 2: 공통 UI 설계** (`@02-common-ui.md`)

- 공통 컴포넌트 (Dialog, Toast, Button 등)
- 레이아웃 컴포넌트 (Header, Footer, Navigation)
- 디자인 시스템 확인

**특징**: 가볍고 빠르게 전체 골격만, Context 제한적

---

### Phase 2: 기능별 완전한 개발 (Feature-Driven)

**목적**: 각 기능을 준비-설계-구현 순서로 완전히 완성

**Phase 2-1: 준비** (`@03-1-preparation.md`)

- **Step 0**: 기능 구현 순서 정리 (최초 1회)
  - 기능 간 의존성 분석
  - 최적 구현 순서 도출
  - 사용자 승인
- **Step 1**: 기능 선택 및 승인 (각 기능마다)
  - 기능 정보 확인
  - 사용자 승인

**Phase 2-2: 설계** (`@03-2-design.md`)

- **Step 2**: UI 설계 (해당 기능만)
  - Figma 분석
  - 컴포넌트 구조 설계
  - Props 인터페이스 정의
  - 스켈레톤 코드 생성
  - 사용자 승인
- **Step 3**: API 설계
  - 비즈니스 요구사항 분석
  - API 엔드포인트 정의
  - 컴포넌트-API 매핑
  - 사용자 승인

**Phase 2-3: 구현** (`@03-3-implementation.md`)

- **Step 4**: 테스트 작성 (Test-First)
  - 비즈니스 로직 테스트
  - API 서비스 테스트
  - 컴포넌트 테스트
  - 통합 테스트
- **Step 5**: 구현 (Green Phase)
  - 비즈니스 로직 구현
  - API 서비스 구현
  - 컴포넌트 로직 구현
- **Step 6**: 리팩토링 (Refactor Phase)
  - 현재 기능 범위 내에서만
- **Step 7**: 기능 검수
  - 사용자 승인
- **Step 8**: 다음 기능으로
  - Phase 2-1 Step 1부터 반복

**공통 컴포넌트 추가 규칙**:

- Phase 2-2 (UI 설계) 중 새로운 공통 컴포넌트 필요 시
- 사용자에게 확인 요청
- 승인 후 즉시 공통 컴포넌트로 추가
- 다음 기능에서 재사용

**특징**:

- 4단계로 분리되어 각 단계의 Context 집중
- 준비 → UI 설계 → API 설계 → 구현 순서로 자연스러운 흐름
- 각 파일이 200-230줄로 최적 크기
- 새 채팅에서도 memory.md를 통해 진행 상황 확인 가능

---

### Phase 3: 전체 시스템 통합 및 최종 검증

**목적**: 완성된 기능들을 통합하고 전체 품질 보증

**Step 1: 통합 및 리팩토링**

- 기능 간 중복 코드 제거
- 공통 모듈 추출
- 전체 구조 개선
- 성능 최적화
- 접근성 개선

**Step 2: E2E 테스트 및 최종 검증**

- E2E 플로우 제안 → 사용자 승인
- E2E 테스트 작성 및 실행
- 최종 품질 검증
- 프로덕션 배포 준비

**특징**: 전체 시스템 관점의 작업, 모든 기능 완성 후 진행

---

## Memory.md 사용법

### 파일 구조

- **전체 진행 상황**: Phase별 진행 상태
- **도메인 목록**: 식별된 도메인
- **기능별 진행 상황**: 각 기능별 구현 상태
- **현재 작업 상태**: 현재 Phase, 기능, 진행률
- **테스트 환경**: 사용 도구 및 설정
- **테스트 현황**: 통과율, 커버리지
- **결과물 경로**: 생성된 파일 위치
- **주요 결정 사항**: 도메인/기술 스택 결정 이유
- **다음 단계 안내**: 다음 작업 및 필요 입력

### 업데이트 시점

- **작업 시작 시**: 현재 진행 상황 파악
- **작업 완료 시**: 완료된 작업 체크, 결과물 경로 기록
- **사용자 승인 후**: 다음 단계로 진행 가능 표시

---

## 워크플로우 프롬프트 파일

### 📌 필수 우선 참조 파일

**모든 작업 시작 전 반드시 읽어야 할 파일**:

1. **`00-main-workflow.md`** (이 파일) - 전체 프로세스 개요
2. **`00-memory.md`** - 현재 진행 상황 및 작업 상태

### Phase별 워크플로우 파일

#### Phase 1: 초기 설계

- **`01-domain-definition.md`** - Turn 1: 도메인 정의 워크플로우

  - 도메인 목록 및 경계 설정
  - 페이지 구조 및 라우팅
  - 기능 목록 및 의존성 파악

- **`02-common-ui.md`** - Turn 2: 공통 UI 설계 워크플로우
  - 공통 컴포넌트 설계
  - 레이아웃 컴포넌트 설계
  - 디자인 시스템 토큰

#### Phase 2: 기능별 개발

- **`03-1-preparation.md`** - Phase 2-1: 기능 구현 준비

  - Step 0: 기능 구현 순서 정리 (최초 1회)
  - Step 1: 기능 선택 및 승인 (각 기능마다)

- **`03-2-ui-design.md`** - Phase 2-2: UI 설계

  - Step 2: UI 설계 (해당 기능만)

- **`03-3-api-design.md`** - Phase 2-3: API 설계

  - Step 3: API 설계

- **`03-4-implementation.md`** - Phase 2-4: 기능 구현
  - Step 4: 테스트 작성
  - Step 5: 구현
  - Step 6: 리팩토링
  - Step 7: 기능 검수
  - Step 8: 다음 기능으로

#### Phase 3: 통합 및 검증

- **`04-integration.md`** - 통합 및 최종 검증 워크플로우
  - Step 1: 통합 및 리팩토링
  - Step 2: E2E 테스트 및 최종 검증

---

### 🤖 AI 작업 시 파일 읽기 순서

**작업 시작 시**:

1. `@00-main-workflow.md` - 전체 구조 파악
2. `@00-memory.md` - 현재 진행 상황 확인
3. 현재 Phase에 해당하는 워크플로우 파일 읽기:
   - Phase 1 Turn 1 → `@01-domain-definition.md`
   - Phase 1 Turn 2 → `@02-common-ui.md`
   - Phase 2-1 (준비) → `@03-1-preparation.md`
   - Phase 2-2 (UI 설계) → `@03-2-ui-design.md`
   - Phase 2-3 (API 설계) → `@03-3-api-design.md`
   - Phase 2-4 (구현) → `@03-4-implementation.md`
   - Phase 3 → `@04-integration.md`

⚠️ **주의**:

- workflows 폴더 전체(`@workflows/`)를 참조하지 말고
- 필요한 파일만 개별적으로 참조 (`@00-main-workflow.md`)
- memory.md를 통해 현재 어느 파일을 읽어야 하는지 확인

---

## 성공 기준

### Phase 1 완료 기준

**Turn 1 (도메인 정의)**:

- [ ] 도메인 목록 및 경계가 명확히 정의됨
- [ ] 페이지 목록 및 라우팅 구조 정의됨
- [ ] 기능 목록 및 의존성 파악됨
- [ ] 기술 스택 제안 완료
- [ ] 사용자 검수 완료

**Turn 2 (공통 UI 설계)**:

- [ ] 공통 컴포넌트 설계 완료
- [ ] 레이아웃 컴포넌트 설계 완료
- [ ] 디자인 토큰 확인 완료
- [ ] 스켈레톤 코드 생성 완료
- [ ] 사용자 검수 완료

### Phase 2 완료 기준

**Phase 2-1 (준비)**:

- [ ] Step 0: 기능 구현 순서 정리 및 승인 (최초 1회)
- [ ] Step 1: 기능 선택 및 승인 (각 기능마다)

**Phase 2-2 (UI 설계)** (각 기능마다):

- [ ] Step 2: UI 설계 및 승인

**Phase 2-3 (API 설계)** (각 기능마다):

- [ ] Step 3: API 설계 및 승인

**Phase 2-4 (구현)** (각 기능마다):

- [ ] Step 4: 테스트 작성 완료
- [ ] Step 5: 구현 및 테스트 통과
- [ ] Step 6: 리팩토링 완료
- [ ] Step 7: 기능 검수 및 승인
- [ ] Step 8: 다음 기능으로

**전체**:

- [ ] 모든 기능 완료
- [ ] 도메인별 기능 완전성 확인

### Phase 3 완료 기준

**Step 1 (통합 및 리팩토링)**:

- [ ] 중복 코드 제거 완료
- [ ] 전체 구조 개선 완료
- [ ] 성능 최적화 목표 달성
- [ ] 접근성 개선 완료
- [ ] 사용자 검수 완료

**Step 2 (E2E 테스트)**:

- [ ] E2E 플로우 승인
- [ ] E2E 테스트 통과
- [ ] 최종 품질 검증 완료
- [ ] 프로덕션 배포 준비 완료
- [ ] 최종 승인
