# 도메인 정의 워크플로우 프롬프트

## 1-1. 도메인 모델 정의

### Context 관리 전략

- **Phase**: Phase 1 (전체 설계)
- **Context 제한**: 전체 도메인 (context 길지만 설계 단계라 괜찮음)
- **필수 참조**: @memory.md, 요구사항 명세서 (memory.md에서 자동 참조)
- **선택적 참조**: 기존 시스템 아키텍처 문서 (memory.md에서 자동 참조)

### AI에게 요청할 내용

```
다음 요구사항을 분석해서 도메인 모델을 식별하고 TypeScript 인터페이스로 정의해주세요:

[요구사항 명세서]

식별 및 정의할 내용:
1. 핵심 비즈니스 엔티티 (TypeScript 인터페이스로)
2. 엔티티 간 관계와 의존성
3. 값 객체 (Value Object) 인터페이스
4. 도메인 서비스 인터페이스
5. 비즈니스 규칙과 제약사항

출력:
- TypeScript 인터페이스 정의 (memory.md의 결과물 경로에 저장)
- 도메인 모델 다이어그램
- JSDoc 문서화
- 비즈니스 규칙 명시

완료 후 memory.md 업데이트:
- 현재 단계 완료 체크
- 결과물 파일 경로를 "결과물 파일 경로" 섹션에 동적 추가
- 식별된 도메인 목록을 "도메인별 진행 상황" 섹션에 추가
- Phase 2, 3에 도메인별 작업 항목 동적 생성
- "현재 작업 상태" 섹션 동적 업데이트
- 다음 단계 안내
```

### 체크리스트

- [ ] 모든 핵심 비즈니스 엔티티가 TypeScript 인터페이스로 정의됨
- [ ] 엔티티 간 관계와 의존성이 명확히 정의됨
- [ ] 값 객체(Value Object)가 적절히 식별되고 정의됨
- [ ] 도메인 서비스 인터페이스가 정의됨
- [ ] 비즈니스 규칙이 도메인 모델에 반영됨
- [ ] JSDoc으로 모든 인터페이스가 문서화됨
- [ ] 도메인 모델 다이어그램이 생성됨
- [ ] 타입 안전성이 보장됨

### 결과물

- `src/entities/[domain]/model/` 폴더의 도메인 모델 인터페이스
- `src/entities/[domain]/integration/` 폴더의 도메인 연동 인터페이스
- `src/shared/utils/types/` 폴더의 유틸리티 타입
- `src/config/types/` 폴더의 설정 타입
- `src/entities/[domain]/events/` 폴더의 도메인 이벤트
- 도메인 모델 다이어그램
- 비즈니스 규칙 문서

## 1-2. 도메인 간 연동 분석 및 정의

### Context 관리 전략

- **Phase**: Phase 1 (전체 설계)
- **Context 제한**: 전체 도메인 (context 길지만 설계 단계라 괜찮음)
- **필수 참조**: @memory.md, 1-1 단계 결과물 (memory.md에서 자동 참조)
- **선택적 참조**: 기존 연동 문서 (memory.md에서 자동 참조)

### AI에게 요청할 내용

```
도메인 모델을 바탕으로 도메인 간 연동을 분석하고 정의해주세요:

[도메인 모델들]

분석할 내용:
1. 도메인 간 의존성 관계
2. 도메인 간 데이터 흐름
3. 도메인 간 이벤트 연동
4. 공유 인터페이스 정의
5. 도메인 간 API 연동

정의할 내용:
1. 도메인 간 연동 인터페이스
2. 이벤트 버스 인터페이스
3. 공유 서비스 인터페이스
4. 도메인 간 데이터 변환 함수 시그니처
5. 연동 에러 처리 인터페이스

출력:
- 도메인 간 연동 다이어그램
- 연동 인터페이스 정의 (memory.md의 결과물 경로에 저장)
- 이벤트 흐름도
- 의존성 그래프

완료 후 memory.md 업데이트:
- 현재 단계 완료 체크
- 결과물 파일 경로 기록
- 다음 단계 안내
```

### 체크리스트

- [ ] 모든 도메인 간 의존성 관계가 식별됨
- [ ] 도메인 간 데이터 흐름이 명확히 정의됨
- [ ] 도메인 간 이벤트 연동이 설계됨
- [ ] 공유 인터페이스가 정의됨
- [ ] 도메인 간 API 연동이 설계됨
- [ ] 연동 에러 처리 방식이 정의됨
- [ ] 도메인 간 연동 다이어그램이 생성됨
- [ ] 순환 의존성이 없음

### 결과물

- 도메인 간 연동 인터페이스 정의
- 연동 다이어그램
- 이벤트 흐름도

## 1-3. 유틸리티 및 설정 인터페이스 정의

### Context 관리 전략

- **Phase**: Phase 1 (전체 설계)
- **Context 제한**: 전체 도메인 (context 길지만 설계 단계라 괜찮음)
- **필수 참조**: @memory.md, 1-1, 1-2 단계 결과물 (memory.md에서 자동 참조)
- **선택적 참조**: 기존 유틸리티 코드, 환경 설정 파일 (memory.md에서 자동 참조)

### AI에게 요청할 내용

```
전체 시스템을 바탕으로 유틸리티와 설정 인터페이스를 정의해주세요:

[도메인 모델 인터페이스]
[API 인터페이스]
[UI 상태 인터페이스]

정의할 유틸리티:
1. 데이터 변환 함수 시그니처
2. 검증 함수 시그니처
3. 포맷팅 함수 시그니처
4. 정렬/필터링 함수 시그니처
5. 에러 처리 함수 시그니처

정의할 설정:
1. 환경별 설정 타입
2. API 엔드포인트 설정 타입
3. 기능 플래그 타입
4. UI 상수 타입
5. 비즈니스 상수 타입
```

### 체크리스트

- [ ] 데이터 변환 함수 시그니처가 정의됨
- [ ] 검증 함수 시그니처가 정의됨
- [ ] 포맷팅 함수 시그니처가 정의됨
- [ ] 정렬/필터링 함수 시그니처가 정의됨
- [ ] 에러 처리 함수 시그니처가 정의됨
- [ ] 환경별 설정 타입이 정의됨
- [ ] API 엔드포인트 설정 타입이 정의됨
- [ ] 기능 플래그 타입이 정의됨
- [ ] UI 상수 타입이 정의됨
- [ ] 비즈니스 상수 타입이 정의됨

### 결과물

- `shared/utils/` 폴더의 유틸리티 타입
- `config/` 폴더의 설정 타입
- 유틸리티 함수 시그니처 정의

## 1-4. 도메인 이벤트 정의

### Context 관리 전략

- **Phase**: Phase 1 (전체 설계)
- **Context 제한**: 전체 도메인 (context 길지만 설계 단계라 괜찮음)
- **필수 참조**: @memory.md, 1-1, 1-2, 1-3 단계 결과물 (memory.md에서 자동 참조)
- **선택적 참조**: 비즈니스 프로세스 문서, 기존 이벤트 시스템 (memory.md에서 자동 참조)

### AI에게 요청할 내용

```
도메인 모델과 비즈니스 규칙을 바탕으로 도메인 이벤트를 정의해주세요:

[도메인 모델]
[비즈니스 규칙]

정의할 이벤트:
1. 엔티티 상태 변화 이벤트
2. 비즈니스 프로세스 이벤트
3. 외부 시스템 연동 이벤트
4. 사용자 액션 이벤트
5. 시스템 이벤트
6. 도메인 간 연동 이벤트

출력:
- 도메인 이벤트 목록
- 각 이벤트의 페이로드
- 이벤트 발생 조건
- 이벤트 처리 방법
- 도메인 간 이벤트 흐름
```

### 체크리스트

- [ ] 엔티티 상태 변화 이벤트가 정의됨
- [ ] 비즈니스 프로세스 이벤트가 정의됨
- [ ] 외부 시스템 연동 이벤트가 정의됨
- [ ] 사용자 액션 이벤트가 정의됨
- [ ] 시스템 이벤트가 정의됨
- [ ] 도메인 간 연동 이벤트가 정의됨
- [ ] 각 이벤트의 페이로드가 정의됨
- [ ] 이벤트 발생 조건이 명시됨
- [ ] 이벤트 처리 방법이 정의됨
- [ ] 이벤트 흐름도가 생성됨

### 결과물

- 도메인 이벤트 인터페이스 정의
- 이벤트 페이로드 타입 정의
- 이벤트 처리 규칙 문서
