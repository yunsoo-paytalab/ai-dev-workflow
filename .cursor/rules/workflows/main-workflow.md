# 메인 워크플로우 프롬프트

## 전체 개발 프로세스 개요

### 4단계 개발 프로세스

1. **도메인 정의**: 비즈니스 도메인의 핵심 개념과 규칙을 명확히 정의
2. **UI 컴포넌트 설계**: 사용자 경험을 고려한 UI 설계 및 컴포넌트 구조 정의
3. **테스트 케이스 작성**: 포괄적이고 안전한 테스트 체계 구축
4. **비즈니스 로직 구현**: 테스트를 통과하는 안전하고 효율적인 코드 구현

### 핵심 원칙

- **테스트 우선 개발 (TDD)**: 모든 로직은 테스트 케이스를 통과해야 함
- **타입 안전성**: TypeScript를 활용한 완전한 타입 안전성 보장
- **도메인 중심 설계**: 비즈니스 로직을 중심으로 한 아키텍처 설계
- **일관성 유지**: 전체 시스템의 일관성 있는 설계 및 구현

## Multi-Turn 작업 방식

### Phase 1: 전체 설계 (1~2 단계)

- **Turn 1**: 전체 도메인 정의
- **Turn 2**: 전체 UI 설계

### Phase 2: 도메인별 완전한 개발 (1~4 단계)

- **Turn 3~N**: 도메인별 상세 작업 (1~3 단계) (동적으로 생성)
- **Turn N+1~M**: 도메인별 구현 (4 단계) (동적으로 생성)

### Phase 3: 전체 시스템 통합 및 최종 검증

- **Turn M+1**: 통합 및 최종 검증

> 상세한 Multi-Turn 작업 방식은 `multi-chat.md` 파일을 참조하세요.

## Context 관리 전략

### 각 Turn별 Context 제한

- **Phase 1**: 전체 도메인 (context 길지만 설계 단계라 괜찮음)
- **Phase 2**: 도메인별 작업 (context 길이 제한 내에서 작업)
- **Phase 3**: 통합 단계 (이미 모든 도메인이 완료되어 context 부담 적음)

### 참조 파일 전략

- **필수 참조** (모든 Turn):
  - @memory.md (항상)
  - 워크플로우 프롬프트: `.cursor/rules/workflows/`
- **Phase별 참조**:
  - **Phase 1**: 전체 도메인 설계, 전체 UI 설계
  - **Phase 2**: 현재 도메인 이전 작업, 공통 인터페이스, 디자인 시스템, 연동 도메인 코드
  - **Phase 3**: 모든 도메인 완성 코드, 통합 테스트 케이스, 성능 벤치마크

### 파일 경로 자동 참조

- **입력 파일**: memory.md의 "입력 파일 경로" 섹션에서 자동 참조
- **결과물 파일**: memory.md의 "결과물 파일 경로" 섹션에 자동 저장
- **참조 파일**: memory.md의 "참조 파일 경로" 섹션에서 Phase별 자동 참조

## Memory.md 사용법

### 파일 구조

- **전체 진행 상황**: Phase별 진행 상태
- **도메인별 진행 상황**: 각 도메인별 세부 작업 상태
- **도메인 간 연동 상태**: 도메인 간 연동 작업 상태
- **공통 작업 상태**: 공통 유틸리티 및 설정 작업 상태
- **파일 경로 관리**: 입력 파일, 결과물 파일, 참조 파일 경로
- **현재 작업 상태**: 현재 Phase, Chat, 도메인, 단계 정보

### 업데이트 시점

- **작업 시작 시**: 현재 진행 상황 파악, 파일 경로 자동 참조
- **작업 중**: 각 단계별 체크리스트 확인
- **작업 완료 시**: 완료된 작업 체크, 결과물 파일 경로 기록, 다음 단계 안내

### 파일 경로 자동 관리

- **입력 파일**: memory.md의 "입력 파일 경로"에서 자동 참조
- **결과물 파일**: memory.md의 "결과물 파일 경로"에 자동 저장
- **참조 파일**: memory.md의 "참조 파일 경로"에서 Phase별 자동 참조

### 체크리스트 활용

- 각 단계별 완료 기준을 명확히 정의
- 품질 기준을 객관적으로 평가
- 누락된 부분을 체계적으로 파악

## 워크플로우 프롬프트 파일

### 도메인 정의

- `domain-definition.md`: 1단계 도메인 정의 워크플로우

### UI 컴포넌트 설계

- `ui-design.md`: 2단계 UI 컴포넌트 설계 워크플로우

### 테스트 케이스 작성

- `test-writing.md`: 3단계 테스트 케이스 작성 워크플로우

### 비즈니스 로직 구현

- `implementation.md`: 4단계 비즈니스 로직 구현 워크플로우

### Multi-Chat 작업 방식

- `multi-chat.md`: Multi-Chat 작업 방식 상세 가이드

### 커맨드 가이드

- `commands.md`: 개발 프로세스 커맨드 가이드
- `command-templates.md`: 커맨드 실행 프롬프트 템플릿

## 커맨드 사용법

### 기본 사용법

각 단계마다 Cursor 채팅에서 다음 커맨드를 사용하세요:

#### 프로젝트 시작

```
@workflow start
```

#### 현재 상태 확인

```
@workflow status
```

#### 다음 단계 진행

```
@workflow next
```

#### 특정 단계 실행

```
@workflow domain 1-1
@workflow ui 2-2
@workflow test 3-1
@workflow implement 4-1
```

#### 특정 도메인 작업

```
@workflow domainA
@workflow phase2 domainB
@workflow phase3 domainC
```

### 커맨드 실행 흐름

1. **Memory.md 읽기**: 현재 진행 상황 파악
2. **다음 단계 식별**: 수행해야 할 단계 결정
3. **워크플로우 프롬프트 로드**: 해당 단계의 가이드 로드
4. **파일 자동 참조**: 필요한 파일들 자동 로드
5. **AI 작업 실행**: 단계별 작업 수행
6. **결과물 저장**: memory.md 경로에 저장
7. **Memory.md 업데이트**: 진행 상황 업데이트

## 품질 보장 방법

### 각 Chat 완료 시 검증

1. 체크리스트 완료 확인
2. 이전 단계와의 일관성 확인
3. 도메인 간 연동 부분 검증
4. 타입 안전성 확인
5. 테스트 커버리지 확인

### 전체 진행 상황 모니터링

1. memory.md를 통한 전체 진행 상황 파악
2. 각 도메인별 완성도 확인
3. 도메인 간 연동 상태 확인
4. 다음 단계 준비 상태 확인

## 동적 도메인 관리

### Phase 1 완료 후 동적 생성

Phase 1 "전체 도메인 정의" 완료 시, AI가 다음 작업을 수행해야 합니다:

1. **식별된 도메인 목록 추출**

   - 요구사항 분석 결과에서 도메인 목록 추출
   - memory.md의 "식별된 도메인 목록" 섹션에 추가

2. **Phase 2 동적 생성**

   - 각 도메인별로 "도메인별 작업 상태" 섹션 생성
   - 1-1부터 3-4까지의 표준 워크플로우 항목 추가

3. **Phase 3 동적 생성**

   - 각 도메인별로 구현 작업 항목 추가
   - 통합 및 최종 검증 항목 추가

4. **도메인 간 연동 정의**
   - 식별된 도메인들 간의 연동 관계 분석
   - "도메인 간 연동 상태" 섹션에 구체적 연동 항목 추가

### 동적 생성 예시

```
## 식별된 도메인 목록
- [x] User (사용자)
- [x] Order (주문)
- [x] Payment (결제)

## 도메인별 작업 상태
### User 도메인
- [ ] 1-1) 도메인 모델 정의
- [ ] 1-2) 도메인 간 연동 분석 및 정의
- ... (표준 워크플로우)

### Order 도메인
- [ ] 1-1) 도메인 모델 정의
- [ ] 1-2) 도메인 간 연동 분석 및 정의
- ... (표준 워크플로우)
```

## 성공 기준

### 1단계 완료 기준

- [ ] 도메인 모델이 완전히 식별되고 TypeScript로 정의됨
- [ ] 비즈니스 규칙이 명확히 정의됨
- [ ] 도메인 이벤트가 정의됨
- [ ] 식별된 도메인 목록이 memory.md에 동적 추가됨
- [ ] Phase 2, 3의 도메인별 작업 항목이 동적 생성됨

### 2단계 완료 기준

- [ ] UI 상태 인터페이스가 완전히 정의됨
- [ ] Figma 디자인이 코드로 완전히 변환됨
- [ ] 컴포넌트 구조가 체계적으로 설계됨
- [ ] 디자인 시스템이 일관성 있게 적용됨

### 3단계 완료 기준

- [ ] 모든 주요 시나리오가 테스트됨
- [ ] 테스트 커버리지 90% 이상
- [ ] 엣지 케이스가 포함됨

### 4단계 완료 기준

- [ ] 모든 테스트 통과
- [ ] 성능 요구사항 충족
- [ ] 프로덕션 준비 완료
